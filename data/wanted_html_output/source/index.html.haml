%div.weekly-calendar
  %table.backdrop
    %thead
      %tr
        %th.hour
        - foreach_weekday do |weekday|
          %th= weekday
    %tbody
      - foreach_hour do |hour|
        %tr.hour
          %td= hour_string_with hour
          - foreach_weekday do
            %td.empty
        - unless last? hour
          %tr.half-hour
            %td= halfhour_string_with hour
            - foreach_weekday do
              %td.empty
  .schedule
    - schedule.each do |weekday|
      %div{class: weekday_classes(weekday)}
        - weekday.periods.each do |period|
          %div{class: period_classes(period)}
            .hour= format_time_of(period)
            .title
              .course= period.course
              .type= period.type