@import "compass"

$column-width: 200px
$row-height: 20px
$period-padding: 10px
$period-width: $column-width - $period-padding * 2 - 10px

<%

HOURS = (8..23)

def foreach_hours
  HOURS.each_with_index { |hour, index| yield hour, index }
end

def for_nb_hours
  HOURS.each_with_index { |hour, index| yield index }
end

def zerofill(hour)
  hour.to_s.rjust(2, "0")
end

%>

.weekly-calendar
  position: relative
  float: left
  margin: 25px

  table.backdrop
    th, td
      padding: 0

    th
      width: $column-width
      height: 20px

    th.hour
      width: 50px

    tbody
      tr
        height: $row-height
        font-size: 12px

      tr.hour
        border-top: 1px solid #808080

      tr.half-hour
        border-top: 1px dashed #d3d3d3

  .schedule
    position: absolute
    top: 20px
    left: 50px

    .weekday
      position: absolute
      top: 0
      left: 0

      &.tuesday
        left: $column-width

      &.wednesday
        left: $column-width * 2

      &.thursday
        left: $column-width * 3

      &.friday
        left: $column-width * 4

      .period
        position: absolute
        top: 0px
        width: $period-width
        padding: $period-padding
        @include border-radius(5px)
        @include box-shadow(0 0 3px rgba(0, 0, 0, .3))

        &.red
          background-color: #F26C4F

        &.red-orange
          background-color: #F68E55

        &.yellow-orange
          background-color: #FBAF5C

        &.yellow
          background-color: #FFF467

        &.pea-green
          background-color: #ACD372

        &.yellow-green
          background-color: #7CC576

        &.green
          background-color: #3BB878

        &.green-cyan
          background-color: #1ABBB4

        &.cyan
          background-color: #00BFF3

        &.cyan-blue
          background-color: #438CCA

        &.blue
          background-color: #5574B9

        &.blue-violet
          background-color: #605CA8

        &.violet
          background-color: #855FA8

        &.violet-magenta
          background-color: #A763A8

        &.magenta
          background-color: #F06EA9

        &.magenta-red
          background-color: #F26D7D

        <% foreach_hours do |hour, index| %>
          <% hour_zerofilled = zerofill(hour) %>
            <% 4.times.each do |nb| %>
        &.from-<%= "#{hour_zerofilled}#{zerofill nb * 15}" %>
          top: <%= index %> * $row-height * 2 + <%= nb %> * $row-height / 2
            <% end %>
        <% end %>

        <% for_nb_hours do |hour| %>
          <% hour_zerofilled = zerofill(hour) %>
            <% 4.times.each do |nb| %>
        &.duration-<%= "#{hour_zerofilled}#{zerofill nb * 15}" %>
          height: <%= hour %> * $row-height * 2 + <%= nb %> * $row-height / 2 - $period-padding * 2
            <% end %>
        <% end %>

        .hour
          margin-bottom: 5px
          font-size: 12px
          font-weight: bold
        .title
          .course
            font-size: 14px
          .type
            font-size: 12px